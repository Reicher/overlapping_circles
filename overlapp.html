<!DOCTYPE html>
<html>
<body>

<canvas id="myCanvas" width="1000" height="800" style="border:1px solid #000000;">
Your browser does not support the HTML5 canvas tag.</canvas>

<script>
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");

ctx.fillStyle = "white";
ctx.fillRect(0, 0, canvas.width, canvas.height);

// Single overlapping
drawSingleCircle = function(n, offset){

  center_x = canvas.width/2
  center_y = canvas.height/2
  radius = Math.min(canvas.width, canvas.height)/2
  
  ctx.beginPath();
  ctx.arc(center_x, center_y, radius, 0, Math.PI * 2, true)
  ctx.clip();

  ctx.beginPath();
  ctx.arc(center_x, center_y, radius, 0, Math.PI * 2, true)
  ctx.stroke(); 

  angle = 0
  for(layer=0; layer < offset.length; layer++){
    angle += Math.PI/n
    for(i = angle; i < Math.PI*2+angle; i += Math.PI*2/n) {
      ctx.beginPath();
      x = center_x + (radius * offset[layer] * 2) * Math.cos(i)
      y = center_y + (radius * offset[layer] * 2) * Math.sin(i)
      console.log(x, y, i)
      ctx.arc(x, y, radius, 0, Math.PI * 2, true);
      ctx.stroke()
    }   
  }
  console.log('Drew circle ', n, offset)
}

// Pattern 
drawPattern = function(center, n, offset, size, color){
  const patternCanvas = document.createElement('canvas');
  const patternContext = patternCanvas.getContext('2d');
  patternCanvas.width = 100;
  patternCanvas.height = 100;

  center_x = patternCanvas.width/2
  center_y = patternCanvas.height/2
  radius = patternCanvas.width/2

  if(center){
    patternContext.beginPath();
    patternContext.arc(center_x, center_y, radius, 0, Math.PI * 2, true)
    patternContext.stroke(); 
  }

  angle = 0
  for(layer=0; layer < offset.length; layer++){
    angle += Math.PI/n
    for(i = angle; i < Math.PI*2+angle; i += Math.PI*2/n) {
      patternContext.beginPath();
      x = center_x + (radius * offset[layer] * 2) * Math.cos(i)
      y = center_y + (radius * offset[layer] * 2) * Math.sin(i)
      patternContext.arc(x, y, radius * size[layer], 0, Math.PI * 2, true);
      patternContext.stroke()
      //patternContext.fillStyle = color[layer]
      //patternContext.fill()
    }   
  }

  const pattern = ctx.createPattern(patternCanvas, 'repeat');
  ctx.fillStyle = pattern;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  console.log('Drew pattern ', center, n, offset, size, color)
}

randomPattern = function(){
  max_n = 20
  max_layers = 5
  do{
    n = Math.floor(Math.random() * max_n) + 1
  }while(n%2!=0)
  
  layers = Math.floor(Math.random() * max_layers) + 1
  layer = []
  color = []
  size = []
  for(l = 0; l < layers; l++){
    layer.push(Math.random()) 
    color.push('#' + Math.floor(Math.random()*16777215).toString(16))
    size.push(Math.random()*2)
  }
  layer.sort();

  drawPattern(Math.random() < 0.5, n, layer, size, color)
}

randomPattern()
//drawPattern(true, 10, [0.5, 0.8], [0.5, 0.8])
//drawSingleCircle(20, [0.5])
</script>

</body>
</html>
